<!-- templates/post_exploit.html -->
{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>Post-Exploitation</h1>
        <a href="/" class="btn btn-outline-secondary">
            <i class="fas fa-home"></i> Accueil
        </a>
    </div>

    <div class="card mb-4">
        <div class="card-header bg-dark text-white">
            <i class="fas fa-info-circle"></i> À propos de la Post-Exploitation
        </div>
        <div class="card-body">
            <p>La phase de post-exploitation commence après l'exploitation réussie d'une vulnérabilité. Elle permet de :</p>
            <ul>
                <li>Explorer le système compromis</li>
                <li>Collecter des informations sensibles</li>
                <li>Maintenir l'accès (persistance)</li>
                <li>Pivoter vers d'autres systèmes du réseau</li>
            </ul>
            <p class="text-danger">
                <i class="fas fa-exclamation-triangle"></i>
                <strong>Attention :</strong> Les activités de post-exploitation ne doivent être réalisées que dans un cadre légal et avec les autorisations appropriées.
            </p>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-header bg-primary text-white">
                    <i class="fas fa-terminal"></i> Accès à la post-exploitation
                </div>
                <div class="card-body">
                    {% if target_ip %}
                    <p>Une cible a été spécifiée : <strong>{{ target_ip }}</strong></p>
                    <a href="{{ url_for('post_exploit.dashboard', target_ip=target_ip) }}" class="btn btn-primary">
                        <i class="fas fa-external-link-alt"></i> Accéder au tableau de bord
                    </a>
                    {% else %}
                    <form action="{{ url_for('post_exploit.dashboard') }}" method="get">
                        <div class="mb-3">
                            <label for="target_ip" class="form-label">Adresse IP cible</label>
                            <input type="text" class="form-control" id="target_ip" name="target_ip" placeholder="192.168.1.100" required>
                            <div class="form-text">Entrez l'adresse IP de la cible sur laquelle vous avez établi une session.</div>
                        </div>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-arrow-right"></i> Accéder
                        </button>
                    </form>
                    {% endif %}
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-header bg-success text-white">
                    <i class="fas fa-file-alt"></i> Sessions récentes
                </div>
                <div class="card-body">
                    <div class="list-group">
                        <a href="{{ url_for('post_exploit.dashboard', target_ip='192.168.1.100') }}" class="list-group-item list-group-item-action">
                            <div class="d-flex w-100 justify-content-between">
                                <h5 class="mb-1">192.168.1.100</h5>
                                <small>Il y a 10 minutes</small>
                            </div>
                            <p class="mb-1">Session active (root)</p>
                        </a>
                        <a href="{{ url_for('post_exploit.dashboard', target_ip='192.168.1.101') }}" class="list-group-item list-group-item-action">
                            <div class="d-flex w-100 justify-content-between">
                                <h5 class="mb-1">192.168.1.101</h5>
                                <small>Il y a 1 heure</small>
                            </div>
                            <p class="mb-1">Session inactive (admin)</p>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="card">
        <div class="card-header bg-info text-white">
            <i class="fas fa-book"></i> Documentation
        </div>
        <div class="card-body">
            <p>L'outil de post-exploitation offre les fonctionnalités suivantes :</p>
            <ul>
                <li><strong>Informations système</strong> - Collecte de données sur le système d'exploitation et le matériel</li>
                <li><strong>Informations réseau</strong> - Configuration réseau et connexions actives</li>
                <li><strong>Gestion des utilisateurs</strong> - Identification des utilisateurs et gestion des privilèges</li>
                <li><strong>Explorateur de fichiers</strong> - Navigation et manipulation du système de fichiers</li>
                <li><strong>Terminal</strong> - Exécution de commandes à distance</li>
                <li><strong>Persistance</strong> - Mécanismes pour maintenir l'accès au système</li>
            </ul>
        </div>
    </div>
</div>
{% endblock %}